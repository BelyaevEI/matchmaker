# Matchmaker

## Функционал приложения.
Приложение предназначено для добавления игроков в пул для создания матча, посредством передачи POST запроса на сервер. Сервер подбирает игроков со сходими параметрами Skill и Latency.

## Алгоритм подбора игроков заключается в следующем:
1. Из пула игроков берется пользователь с самым большим ожиданием создания матча.
2. Пул игроков сортируется по возрастания наименьшего отклонения параметров игрока из пункта 1.
3. Выбирается первое количество игроков заданное в конфиге приложения.

## Архитектура приложения.
На этапе инициализации создается сущность Provider, которая содержит в себе все необходимые зависимости и обьекты для запуска приложения. Переменные считываются с файла config.env и загружаются в переменные окружения.
Приложение имеет слоистую структуру:
- API слой для взаимодействия с http запросами
- сервисны слой для бизнес логики
- репозитарный слой для обработки данных

В качестве СУБД используется postgresql. 
В файле config.env задаются параметры:
- GROUP_SIZE кол-во игроков в группе для поиска
- STORAGE варианты хранения пользователей в пуле(true - в memory; false - в БД)

## Deploy
Для конфигурации приложения matchmaker написан отдельный Dockerfile. С помощью библиотеки goose реализована мирграция БД. Миграция накатывается отдельно при деплое после создания контейнера с БД.

## Команда запуска приложения:
```
docker-compose up -d
``` 



 
